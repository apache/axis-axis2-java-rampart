<html>
<head>
  <meta http-equiv="content-type" content="">
  <title>JiBX general document/literal</title>
  <link href="../../css/axis-docs.css" rel="stylesheet" type="text/css" media="all" />
</head>

<body>
<h1>JiBX general document/literal</h1>

<p>Code generation for JiBX data binding converts operations defined by a Web
service to method calls. With general document/literal (doc/lit) Web services
the generated methods each take a single parameter object and return a single
result object. Here's a sample doc/lit WSDL (partial) by way of an example:</p>

<pre>
&lt;wsdl:definitions targetNamespace="http://ws.sosnoski.com/library/wsdl"
    xmlns:tns="http://ws.sosnoski.com/library/types"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/">
    
  &lt;wsdl:types>
  
    &lt;schema elementFormDefault="qualified"
        targetNamespace="http://ws.sosnoski.com/library/types"
        xmlns="http://www.w3.org/2001/XMLSchema">
        
      &lt;element name="getBook">
        &lt;complexType>
          &lt;sequence>
            &lt;element name="isbn" type="string"/>
          &lt;/sequence>
        &lt;/complexType>
      &lt;/element>
      
      &lt;element name="getBookResponse">
        &lt;complexType>
          &lt;sequence>
            &lt;element name="book" minOccurs="0" type="tns:BookInformation"/>
          &lt;/sequence>
        &lt;/complexType>
      &lt;/element>
      
      &lt;element name="addBook">
        &lt;complexType>
          &lt;sequence>
            &lt;element name="type" type="string"/>
            &lt;element name="isbn" type="string"/>
            &lt;element name="author" minOccurs="0" maxOccurs="unbounded" type="string"/>
            &lt;element name="title" type="string"/>
          &lt;/sequence>
        &lt;/complexType>
      &lt;/element>
      
      &lt;element name="addBookResponse">
        &lt;complexType>
          &lt;sequence>
            &lt;element name="success" type="boolean"/>
          &lt;/sequence>
        &lt;/complexType>
      &lt;/element>
      
      &lt;complexType name="BookInformation">
        &lt;sequence>
          &lt;element name="author" minOccurs="0" maxOccurs="unbounded" type="string"/>
          &lt;element name="title" type="string"/>
        &lt;/sequence>
        &lt;attribute name="type" use="required" type="string"/>
        &lt;attribute name="isbn" use="required" type="string"/>
      &lt;/complexType>
      
    &lt;/schema>

  &lt;/wsdl:types>

  &lt;wsdl:message name="getBookRequest">
    &lt;wsdl:part element="wns:getBook" name="parameters"/>
  &lt;/wsdl:message>

  &lt;wsdl:message name="getBookResponse">
    &lt;wsdl:part element="wns:getBookResponse" name="parameters"/>
  &lt;/wsdl:message>

  &lt;wsdl:message name="addBookRequest">
    &lt;wsdl:part element="wns:addBook" name="parameters"/>
  &lt;/wsdl:message>
  
  &lt;wsdl:message name="addBookResponse">
    &lt;wsdl:part element="wns:addBookResponse" name="parameters"/>
  &lt;/wsdl:message>

  &lt;wsdl:portType name="Library">

    &lt;wsdl:operation name="getBook">
      &lt;wsdl:input message="wns:getBookRequest" name="getBookRequest"/>
      &lt;wsdl:output message="wns:getBookResponse" name="getBookResponse"/>
    &lt;/wsdl:operation>

    &lt;wsdl:operation name="addBook">
      &lt;wsdl:input message="wns:addBookRequest" name="addBookRequest"/>
      &lt;wsdl:output message="wns:addBookResponse" name="addBookResponse"/>
    &lt;/wsdl:operation>

  &lt;/wsdl:portType>
  ...
&lt;/wsdl:definitions>
</pre>

<p>This WSDL defines a service with just two operations: <b>getBook</b> and
<b>addBook</b>. The <b>getBook</b> operation takes a <i>getBook</i> element as
input, and returns a <i>getBookResponse</i> element as output, while
<b>addBook</b> takes an <i>addBook</i> element as input and returns an
<i>addBookResponse</i> as output. Here's the body of the client interface
generated by the standard JiBX code generation:</p>

<pre>
    public interface LibraryJibxUnwrapped {
          
             
        /**
         * Auto generated method signatures
         * @param addBook
         */
         public com.sosnoski.ws.library.jibx.wrappers.AddBookResponse addBook(
         com.sosnoski.ws.library.jibx.wrappers.AddBookRequest addBook) throws java.rmi.RemoteException
          
                       
             ;
             
             
        /**
         * Auto generated method signatures
         * @param getBook
         */
         public com.sosnoski.ws.library.jibx.wrappers.GetBookResponse getBook(
         com.sosnoski.ws.library.jibx.wrappers.GetBookRequest getBook) throws java.rmi.RemoteException
          
                       
             ;
             

        
       //
       }
</pre>

<p>You can see that the JiBX code generation converted the operations into
simple method call interfaces using objects corresponding to the input and
output elements of the operation (see
<a href="./jibx-unwrapped-example.html">JiBX Unwrapped Example</a> for the
interface generated when unwrapping is instead used). The server-side interface
is the same.</p>

<p>You need to supply an appropriate JiBX binding definition for use in code
generation (using the <i>-Ebindingfile {file}</i> parameter for WSDL2Java - see
<a href="./jibx-codegen-integration.html#codegen">JiBX Codegen Integration -
WSDL2Java usage</a> for more details). This must define concrete <i>mappings</i>
for each element used as the input or output of an operation. The JiBX code
generation extension matches the element names to the binding in order to
determine the corresponding class to use in generated code.</p>

<p>For example, here's a binding definition that matches the above WSDL:</p>

<pre>
&lt;binding add-constructors="true">

  &lt;namespace uri="http://ws.sosnoski.com/library/types" default="elements"/>
  
  &lt;mapping name="getBook"
      class="com.sosnoski.ws.library.jibx.wrappers.GetBookRequest">
    &lt;value name="isbn" field="m_isbn"/>
  &lt;/mapping>
  
  &lt;mapping name="getBookResponse"
      class="com.sosnoski.ws.library.jibx.wrappers.GetBookResponse">
    &lt;structure name="book" field="m_book"/>
  &lt;/mapping>
  
  &lt;mapping name="addBook"
      class="com.sosnoski.ws.library.jibx.wrappers.AddBookRequest">
    &lt;structure field="m_book">
      &lt;value name="type" field="m_type"/>
      &lt;value name="isbn" field="m_isbn"/>
      &lt;collection field="m_authors">
        &lt;value name="author" type="java.lang.String"/>
      &lt;/collection>
      &lt;value name="title" field="m_title"/>
    &lt;/structure>
  &lt;/mapping>
  
  &lt;mapping name="addBookResponse"
      class="com.sosnoski.ws.library.jibx.wrappers.AddBookResponse"/>
  
  &lt;mapping abstract="true" class="com.sosnoski.ws.library.jibx.beans.Book">
    &lt;value name="type" style="attribute" field="m_type"/>
    &lt;value name="isbn" style="attribute" field="m_isbn"/>
    &lt;collection field="m_authors">
      &lt;value name="author" type="java.lang.String"/>
    &lt;/collection>
    &lt;value name="title" field="m_title"/>
  &lt;/mapping>

&lt;/binding>
</pre>

<p>And here are the actual data object classes:</p>

<pre>
package com.sosnoski.ws.library.jibx.wrappers;

import com.sosnoski.ws.library.jibx.beans.Book;

public class AddBookRequest
{
    private Book m_book;
    
    public AddBookRequest(Book book) {
        m_book = book;
    }
    
    public Book getBook() {
        return m_book;
    }
}

public class AddBookResponse
{
}

public class GetBookRequest
{
    private String m_isbn;
    
    public GetBookRequest(String isbn) {
        m_isbn = isbn;
    }

    public String getIsbn() {
        return m_isbn;
    }
}

public class GetBookResponse
{
    private Book m_book;
    
    public GetBookResponse(Book book) {
        m_book = book;
    }
    
    public Book getBook() {
        return m_book;
    }
}

package com.sosnoski.ws.library.jibx.beans;

public class Book
{
    private String m_type;
    private String m_isbn;
    private String m_title;
    private String[] m_authors;
    
    public Book() {}

    public String getType() {
        return m_type;
    }
    
    public String getIsbn() {
        return m_isbn;
    }
    
    public String getTitle() {
        return m_title;
    }
    
    public String[] getAuthors() {
        return m_authors;
    }
}
</pre>

</body>
</html>
